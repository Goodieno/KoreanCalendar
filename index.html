<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ë‹¹ì§„ ì›”ê°„ ìº˜ë¦°ë”</title>

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #0f172a;
    color: white;
}

/* Layout */
.container {
    display: grid;
    grid-template-columns: 3fr 1fr;
    height: 100vh;
}

/* Calendar Section */
.calendar-section {
    padding: 20px;
}

.header {
    text-align: center;
    font-size: 42px;
    margin-bottom: 20px;
    font-weight: bold;
}

/* Weekdays */
.weekdays, .days {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
}

.weekdays div {
    text-align: center;
    font-weight: bold;
    padding: 12px 0;
    border-bottom: 2px solid #334155;
    font-size: 30px; /* Bigger weekdays */
}

/* Days */
.days div {
    min-height: 100px;
    border: 1px solid #334155;
    padding: 6px;
    box-sizing: border-box;
    font-size: 24px; /* Bigger numbers */
    font-weight: bold;
}

/* Sunday / Holiday */
.sun {
    color: #ff6b6b;
}

.holiday {
    color: #ff6b6b;
    font-size: 13px;
    margin-top: 4px;
}

/* Highlight holiday cell */
.holiday-cell {
    background: rgba(255, 107, 107, 0.08);
}

/* Today */
.today {
    background: #1e293b;
    border: 3px solid #38bdf8;
}

/* Info Panel */
.info-panel {
    border-left: 2px solid #334155;
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.card {
    background: #020617;
    padding: 18px;
    border-radius: 12px;
    text-align: center;
}

.time {
    font-size: 46px;
    font-weight: bold;
}

.temp {
    font-size: 34px;
}

.aqi {
    font-size: 24px;
}

.location {
    font-size: 16px;
    color: #cbd5f5;
}
</style>
</head>

<body>

<div class="container">

<!-- Calendar -->
<div class="calendar-section">

    <div class="header" id="monthTitle"></div>

    <div class="weekdays">
        <div class="sun">ì¼</div>
        <div>ì›”</div>
        <div>í™”</div>
        <div>ìˆ˜</div>
        <div>ëª©</div>
        <div>ê¸ˆ</div>
        <div>í† </div>
    </div>

    <div class="days" id="calendarDays"></div>

</div>

<!-- Info Panel -->
<div class="info-panel">

    <div class="card">
        <div class="time" id="clock"></div>
        <div id="dateText"></div>
    </div>

    <div class="card">
        <div>ğŸŒ¤ï¸ ë‚ ì”¨</div>
        <div class="temp" id="weatherTemp">--Â°C</div>
        <div id="weatherDesc">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
    </div>

    <div class="card">
        <div>ğŸ˜· ë¯¸ì„¸ë¨¼ì§€</div>
        <div class="aqi" id="airQuality">--</div>
    </div>

    <div class="card location">
        ì¶©ì²­ë‚¨ë„ ë‹¹ì§„ì‹œ
    </div>

</div>

</div>

<script>

/* =====================
   API SETTINGS
===================== */

const WEATHER_API_KEY = "fa9fe37b9be14839fe6774643939e974";
const CITY = "Dangjin-si,KR";

/* Dangjin Coordinates (for AQI) */
const LAT = 36.8890;
const LON = 126.6294;


/* =====================
   Korean Holidays (Basic)
===================== */

const holidays = {
    "1-1": "ì‹ ì •",
    "3-1": "ì‚¼ì¼ì ˆ",
    "5-5": "ì–´ë¦°ì´ë‚ ",
    "6-6": "í˜„ì¶©ì¼",
    "8-15": "ê´‘ë³µì ˆ",
    "10-3": "ê°œì²œì ˆ",
    "10-9": "í•œê¸€ë‚ ",
    "12-25": "ì„±íƒ„ì ˆ"
};


/* =====================
   Calendar
===================== */

function generateCalendar() {

    const now = new Date();
    const year = now.getFullYear();
    const month = now.getMonth();

    const firstDay = new Date(year, month, 1).getDay();
    const lastDate = new Date(year, month + 1, 0).getDate();

    const daysContainer = document.getElementById("calendarDays");
    const title = document.getElementById("monthTitle");

    title.innerText = `${year}ë…„ ${month + 1}ì›”`;

    daysContainer.innerHTML = "";

    // Empty slots
    for (let i = 0; i < firstDay; i++) {
        daysContainer.appendChild(document.createElement("div"));
    }

    for (let day = 1; day <= lastDate; day++) {

        const cell = document.createElement("div");
        const date = new Date(year, month, day);

        const key = `${month + 1}-${day}`;

        // Today
        if (
            day === now.getDate() &&
            month === now.getMonth()
        ) {
            cell.classList.add("today");
        }

        // Sunday
        if (date.getDay() === 0) {
            cell.classList.add("sun");
        }

        cell.innerHTML = `<div>${day}</div>`;

        // Holiday
        if (holidays[key]) {

            cell.classList.add("holiday-cell");

            cell.innerHTML +=
                `<div class="holiday">${holidays[key]}</div>`;
        }

        daysContainer.appendChild(cell);
    }
}


/* =====================
   Clock
===================== */

function updateClock() {

    const now = new Date();

    const h = String(now.getHours()).padStart(2, "0");
    const m = String(now.getMinutes()).padStart(2, "0");
    const s = String(now.getSeconds()).padStart(2, "0");

    document.getElementById("clock").innerText =
        `${h}:${m}:${s}`;

    document.getElementById("dateText").innerText =
        now.toLocaleDateString("ko-KR", {
            weekday: "long",
            year: "numeric",
            month: "long",
            day: "numeric"
        });
}


/* =====================
   Weather
===================== */

async function loadWeather() {

    try {

        const res = await fetch(
            `https://api.openweathermap.org/data/2.5/weather?q=${CITY}&units=metric&appid=${WEATHER_API_KEY}&lang=kr`
        );

        if (!res.ok) throw new Error("Weather Error");

        const data = await res.json();

        document.getElementById("weatherTemp").innerText =
            `${Math.round(data.main.temp)}Â°C`;

        document.getElementById("weatherDesc").innerText =
            data.weather[0].description;

    } catch (err) {

        document.getElementById("weatherDesc").innerText =
            "ë‚ ì”¨ ì˜¤ë¥˜";

        console.error(err);
    }
}


/* =====================
   Air Quality
===================== */

async function loadAirQuality() {

    try {

        const res = await fetch(
            `https://api.openweathermap.org/data/2.5/air_pollution?lat=${LAT}&lon=${LON}&appid=${WEATHER_API_KEY}`
        );

        if (!res.ok) throw new Error("AQI Error");

        const data = await res.json();

        const aqi = data.list[0].main.aqi;

        const map = {
            1: "ì¢‹ìŒ ğŸ˜Š",
            2: "ë³´í†µ ğŸ™‚",
            3: "ë‚˜ì¨ ğŸ˜",
            4: "ë§¤ìš° ë‚˜ì¨ ğŸ˜·",
            5: "ìœ„í—˜ â˜ ï¸"
        };

        document.getElementById("airQuality").innerText =
            map[aqi];

    } catch (err) {

        document.getElementById("airQuality").innerText =
            "AQI ì˜¤ë¥˜";

        console.error(err);
    }
}


/* =====================
   Init
===================== */

generateCalendar();
updateClock();

setInterval(updateClock, 1000);

loadWeather();
loadAirQuality();

setInterval(() => {
    loadWeather();
    loadAirQuality();
}, 600000);

</script>

</body>
</html>
