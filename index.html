<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>TV Calendar</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #111;
    color: white;
    text-align: center;
}

#weather, #air {
    margin: 10px;
    font-size: 18px;
}

.calendar {
    width: 90%;
    margin: auto;
    margin-top: 20px;
}

.month {
    margin-bottom: 40px;
}

.month h2 {
    margin-bottom: 10px;
}

.grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 5px;
}

.day {
    border: 1px solid #444;
    padding: 10px;
    min-height: 60px;
}

.red {
    color: red;
    font-weight: bold;
}

.holiday {
    background: #330000;
}

.multi {
    background: #552200;
}

.small {
    font-size: 12px;
    margin-top: 4px;
    opacity: 0.8;
}
</style>
</head>

<body>

<h1>üìÖ TV Calendar</h1>

<div id="weather">Loading weather...</div>
<div id="air">Loading air quality...</div>

<div id="calendar" class="calendar"></div>

<script>
const API_KEY = "fa9fe37b9be14839fe6774643939e974";
const CITY = "Dangjin-si";
const COUNTRY = "KR";

const calendar = document.getElementById("calendar");


// ================= WEATHER =================
async function loadWeather() {

    const url = `https://api.openweathermap.org/data/2.5/weather?q=${CITY},${COUNTRY}&appid=${API_KEY}&units=metric`;

    const res = await fetch(url);
    const data = await res.json();

    if (data.cod !== 200) {
        document.getElementById("weather").innerText = "Weather: City not found";
        return;
    }

    const temp = data.main.temp;
    const desc = data.weather[0].description;
    const lat = data.coord.lat;
    const lon = data.coord.lon;

    document.getElementById("weather").innerText =
        `üå§ ${CITY}: ${temp}¬∞C | ${desc}`;

    loadAir(lat, lon);
}


// ================= AIR QUALITY =================
async function loadAir(lat, lon) {

    const url = `https://api.openweathermap.org/data/2.5/air_pollution?lat=${lat}&lon=${lon}&appid=${API_KEY}`;

    const res = await fetch(url);
    const data = await res.json();

    const aqi = data.list[0].main.aqi;

    const levels = [
        "",
        "Good üòä",
        "Fair üôÇ",
        "Moderate üòê",
        "Poor üò∑",
        "Very Poor ‚ò†Ô∏è"
    ];

    document.getElementById("air").innerText =
        `üí® Air Quality: ${levels[aqi]}`;
}



// ================= HOLIDAYS =================
const holidays = {

    // 2026 (you can add more later)
    "2026-01-01": "New Year",
    "2026-02-16": "Seollal",
    "2026-02-17": "Seollal",
    "2026-02-18": "Seollal",

    "2026-03-01": "Independence Day",
    "2026-05-05": "Children's Day",

    "2026-06-06": "Memorial Day",

    "2026-08-15": "Liberation Day",

    "2026-09-24": "Chuseok",
    "2026-09-25": "Chuseok",
    "2026-09-26": "Chuseok",

    "2026-10-03": "National Foundation Day",

    "2026-10-09": "Hangul Day",

    "2026-12-25": "Christmas"
};


// ================= CALENDAR =================
function createCalendar(year) {

    calendar.innerHTML = "";

    for (let month = 0; month < 12; month++) {

        const first = new Date(year, month, 1);
        const last = new Date(year, month + 1, 0);

        const monthDiv = document.createElement("div");
        monthDiv.className = "month";

        const title = document.createElement("h2");
        title.innerText =
            first.toLocaleString("en", { month: "long" }) + " " + year;

        monthDiv.appendChild(title);

        const grid = document.createElement("div");
        grid.className = "grid";

        // Day names
        ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]
            .forEach(d => {

                const el = document.createElement("div");
                el.innerText = d;
                el.style.fontWeight = "bold";

                if (d === "Sun") el.classList.add("red");

                grid.appendChild(el);
            });


        // Empty cells
        for (let i = 0; i < first.getDay(); i++) {
            grid.appendChild(document.createElement("div"));
        }


        // Days
        for (let d = 1; d <= last.getDate(); d++) {

            const cell = document.createElement("div");
            cell.className = "day";

            const date =
                `${year}-${String(month+1).padStart(2,"0")}-${String(d).padStart(2,"0")}`;

            cell.innerText = d;

            const day = new Date(year, month, d).getDay();

            // Sunday = red
            if (day === 0) cell.classList.add("red");


            // Holidays
            if (holidays[date]) {

                cell.classList.add("holiday");

                const small = document.createElement("div");
                small.className = "small";
                small.innerText = holidays[date];

                cell.appendChild(small);

                // Multi-day shading
                if (
                    holidays[
                        `${year}-${String(month+1).padStart(2,"0")}-${String(d+1).padStart(2,"0")}`
                    ]
                ) {
                    cell.classList.add("multi");
                }
            }

            grid.appendChild(cell);
        }

        monthDiv.appendChild(grid);
        calendar.appendChild(monthDiv);
    }
}



// ================= START =================
loadWeather();
createCalendar(2026);

</script>

</body>
</html>
